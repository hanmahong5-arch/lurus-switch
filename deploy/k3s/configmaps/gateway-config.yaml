# Gateway Service ConfigMap
apiVersion: v1
kind: ConfigMap
metadata:
  name: gateway-config
  namespace: lurus-system
data:
  config.yaml: |
    server:
      mode: production
      http:
        addr: ":18100"
        timeout: 300s
        read_timeout: 30s
        write_timeout: 300s
        idle_timeout: 120s

    provider:
      endpoint: "http://provider-service:18101"
      timeout: 5s
      cache_ttl: 5m

    billing:
      endpoint: "http://billing-service:18103"
      timeout: 3s
      enabled: false

    log:
      enabled: true
      batch_size: 10
      batch_timeout: 100ms

    nats:
      url: "nats://nats:4222"
      subjects:
        log_write: "log.write"
        billing_usage: "billing.usage"

    features:
      new_api_enabled: true
      new_api_url: "http://new-api:3000"
      offline_mode: false
      billing_check: false
      async_logging: true

    proxy:
      round_robin: true
      retry_count: 3
      request_timeout: 120s

    metrics:
      enabled: true
      path: "/metrics"

    tracing:
      enabled: true
      endpoint: "jaeger:4317"
      sample_rate: 0.1
      service_name: "gateway-service"
      service_version: "1.0.0"
